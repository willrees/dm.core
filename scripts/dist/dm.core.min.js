window.dm=window.dm||{},window.dm.types=window.dm.types||{},window.dm.utilities=window.dm.utilities||{},window.dm.config={basePath:void 0,errors:{redirectOnErrors:!0,defaultErrorPage:void 0},authentication:{usesAuthentication:!0,loginPage:void 0}},window.dm.types.List=function(a){"use strict";var b=[];return void 0!==a&&(b=a),b.first=function(){return this[0]},b.last=function(){return this[this.length-1]},b.where=function(a){if("function"!=typeof a)throw new TypeError;var c=[];return b.forEach(function(b,d,e){a(JSON.parse(JSON.stringify(b)))&&c.push(b)}),new dm.types.List(c)},b.pluck=function(a){if("string"!=typeof a)throw new TypeError;var c=[];return b.forEach(function(b,d,e){void 0!==b[a]&&c.push(b[a])}),new dm.types.List(c)},b.shuffle=function(){for(var a,c,d=b.length;0!==d;)c=Math.floor(Math.random()*d),d-=1,a=b[d],b[d]=b[c],b[c]=a;return b},b},window.dm.utilities.http=function(a,b){function c(){if(b.errors.redirectOnErrors&&void 0===b.errors.defaultErrorPage)throw"You must set the path to the sites generic error page in dm.configuration.errors.defaultErrorPage";if(b.authentication.usesAuthentication&&void 0===b.authentication.loginPage)throw"You must set the path to the sites login page in dm.authentication.loginPage";if(void 0!==b.basePath)throw"The sites base path has not been configured in dm.configuration.basePath"}var d={debug:!1,validateAntiForgeryToken:!1,redirectOnAllErrors:!1},e=function(b){c();var e=a.Deferred();return b.success=function(a,b,c){a.Success||void 0===a.Success&&200===c.status?e.resolve(a):d.redirectOnAllErrors===!0?f(c):e.reject(a.Errors)},b.error=function(a,b,c){f(a,b,c)},b.data&&d.validateAntiForgeryToken===!0&&(b.data.__RequestVerificationToken=a('input[name="__RequestVerificationToken"]').val()),a.ajax(b),e.promise()},f=function(a){450!==a.status&&401!==a.status&&403!==a.status||!b.authentication.usesAuthentication?d.debug===!1&&b.errors.redirectOnErrors?window.location=d.errorPage:d.debug&&(alert("HTTP error occured"),console.log(arguments)):window.location=d.loginPage+"?returnUrl="+window.location.href.replace(d.basePath,"/")},g=function(a){return e({type:"GET",url:a,cache:!1})},h=function(a,b){return e({type:"POST",url:a,cache:!1,data:b})},i=function(a,b){return e({type:"PUT",url:a,cache:!1,data:b})},j=function(a,b){return e({type:"DELETE",url:a,cache:!1,data:b})};return{get:g,post:h,put:i,"delete":j,settings:d}}(jQuery,dm.config);