window.dm=function(){function a(a,c,d,e,f){var g=f?b:b.fn;void 0===g[a]&&(void 0!==d&&null!==d&&(b.config[a]=d),b.registeredComponents.push({name:a,component:c,dependencies:e,initialized:!1,global:f}))}var b=function(a){return new b.fn.init(a)};return b.config={basePath:void 0},b.registeredComponents=[],b.fn=b.prototype,b.fn.init=function(a){return this.selector=a,this},b.fn.init.prototype=b.prototype,b.componentFactory=function(b,c,d,e){a(b,c,d,e,!1)},b.globalComponentFactory=function(b,c,d,e){a(b,c,d,e,!0)},b.bind=function(a){void 0!=a&&(this.config=jQuery.extend(!0,this.config,a));for(var c=0;c<this.registeredComponents.length;c++){var d=this.registeredComponents[c];if(d.initialized===!1){d.initialized=!0;var e=d.global?b:b.fn;"function"==typeof d.dependencies?e[d.name]=d.component.apply(e[d.name],d.dependencies()):e[d.name]=d.component.apply(e[d.name],d.dependencies)}}},b}(),dm.List=function(a){var b=[];return void 0!==a&&(b=a),b.first=function(){return this[0]},b.last=function(){return this[this.length-1]},b.where=function(a){if("function"!=typeof a)throw new TypeError;var c=[];return b.forEach(function(b,d,e){a(JSON.parse(JSON.stringify(b)))&&c.push(b)}),new dm.List(c)},b.pluck=function(a){if("string"!=typeof a)throw new TypeError;var c=[];return b.forEach(function(b,d,e){void 0!==b[a]&&c.push(b[a])}),new dm.List(c)},b.shuffle=function(){for(var a,c,d=b.length;0!==d;)c=Math.floor(Math.random()*d),d-=1,a=b[d],b[d]=b[c],b[c]=a;return b},b.remove=function(a){var c=b.indexOf(a);return b.splice(c,1)},b.forEach||(b.forEach=function(a){for(var b=0;b<this.length;b++)a.apply(this,[this[b],b,this])}),b.indexOf||(b.indexOf=function(a,b){for(var c=b||0,d=this.length;d>c;c++)if(this[c]===a)return c}),b},dm.globalComponentFactory("featureDetection",function(a){function b(b){var c=!1,d="Webkit Moz ms O".split(" "),e=a.createElement("div"),f=null;if(b=b.toLowerCase(),void 0!==e.style[b]&&(c=!0),c===!1){f=b.charAt(0).toUpperCase()+b.substr(1);for(var g=0;g<d.length;g++)if(void 0!==e.style[d[g]+f]){c=!0;break}}return c}var c=[],d=function(a,b,d,e){c.push({name:a,test:b,validClass:d,inValidClass:e})},e=function(){for(var b="";c.length>0;){var d=c.pop();b=d.test()?b+" "+d.validClass:b+" "+d.inValidClass}var e=a.querySelectorAll("html");e[0].className=e[0].className+b};return d("hasTouch",function(){return"ontouchstart"in window||"onmsgesturechange"in window},"touch","no-touch"),d("hasCssTransition",function(){return b("transition")},"csstransitions","no-csstransitions"),d("hasCssTransforms",function(){return b("transform")},"csstransform","no-csstransform"),d("hasCssAnimation",function(){return b("animation")},"cssanimation","no-cssanimation"),dm.config.featureDetection.enabled&&e(),{runTests:e,createTest:d}},{enabled:!1},[document]),dm.globalComponentFactory("cacheFactory",function(a){var b=function(){var b=new a;this.get=function(a){var c=b.where(function(b){return b.key===a});return 0===c.length?void 0:c[0]},this.set=function(a,c){this.containsKey(a)===!1?b.push({key:a,value:c}):this.get(a).value=c},this.containsKey=function(a){return void 0!==this.get(a)},this.remove=function(a){if(this.containsKey(a)){var c=this.get(a);b.remove(c)}},this.clear=function(){b=new a}},c={create:function(){return new b}};return c},null,[dm.List]),dm.globalComponentFactory("http",function(){function a(a){var e=$.Deferred();return a.success=function(a,b,f){a.Success||void 0===a.Success&&0===f.status.toString().indexOf("2")?e.resolve(a):a.Success===!1?e.reject(a):d.debug?(alert("HTTP error occured"),console.log(arguments)):window.location=c.errors.errorPage500},a.error=function(a,c,d){b(a,c,d)},a.data&&d.validateAntiForgeryToken===!0&&(a.data.__RequestVerificationToken=$('input[name="__RequestVerificationToken"]').val()),$.ajax(a),e.promise()}function b(a){450!==a.status&&401!==a.status&&403!==a.status||!c.authentication.usesAuthentication?0===a.status.toString().indexOf("5")&&d.debug===!1?window.location=c.errors.errorPage500:404===a.status?setting.debug===!0?alert("404 not found"):window.location=c.errors.errorPage404:d.debug?(alert("HTTP error occured"),console.log(arguments)):window.location=c.errors.errorPage500:window.location=c.authentication.loginPage+"?returnUrl="+window.location.href.replace(d.basePath,"/")}var c=dm.config.http,d={debug:!1,validateAntiForgeryToken:!1},e=function(b){return a({type:"GET",url:b,cache:!1})},f=function(b,c,d){return(null===d||void 0===d)&&(d="json"),a({type:"POST",url:b,cache:!1,data:c,dataType:d})},g=function(b,c){return a({type:"PUT",url:b,cache:!1,data:c})},h=function(b,c){return a({type:"DELETE",url:b,cache:!1,data:c})};return{get:e,post:f,put:g,"delete":h,settings:d}},{errors:{errorPage500:"500.html",errorPage404:"404.html"},authentication:{usesAuthentication:!0,loginPage:"login.html"}},[jQuery]),dm.globalComponentFactory("utilities",function(a){var b={isDate:function(a){var b=a;if(""===b)return!1;var c=/^(\d{1,2})(\/|-)(\d{1,2})(\/|-)(\d{4})$/,d=b.match(c);if(null===d)return!1;var e=parseInt(d[1]),f=parseInt(d[3]),g=parseInt(d[5]);if(1>e||e>12)return!1;if(1>f||f>31)return!1;if((4==e||6==e||9==e||11==e)&&31==f)return!1;if(2==e){var h=g%4===0&&(g%100!==0||g%400===0);if(f>29||29==f&&!h)return!1}return!0}};return{date:b}},null,[jQuery]),dm.globalComponentFactory("dataApi",function(a,b){var c=b(a),d=function(){c.on("click","[data-href]",function(a){dm.dataApi.dataHref.call(this,a)})},e=function(a){a.stopPropagation(),a.preventDefault(),window.location=b(this).data("href")},f=function(){c.on("click",'[data-async-submit="true"]',function(a){dm.dataApi.dataAsyncFormSubmit.call(this,a)})},g=function(a){a.stopPropagation(),a.preventDefault();var c=b(this),d=b(c.get(0).form);if(d.valid()){var e=void 0===c.attr("data-submit-url")?d.attr("action"):c.attr("data-submit-url"),f=d.serialize();dm.http.post(e,f,"json").always(function(a){c.trigger("async-submit-finished",a)})}},h=function(){d(),f()};return h(),{dataHref:e,dataAsyncFormSubmit:g}},null,[document,jQuery]);